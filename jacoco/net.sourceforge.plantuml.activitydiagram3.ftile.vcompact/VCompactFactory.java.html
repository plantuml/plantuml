<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>VCompactFactory.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">plantuml</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.plantuml.activitydiagram3.ftile.vcompact</a> &gt; <span class="el_source">VCompactFactory.java</span></div><h1>VCompactFactory.java</h1><pre class="source lang-java linenums">/* ========================================================================
 * PlantUML : a free UML diagram generator
 * ========================================================================
 *
 * (C) Copyright 2009-2024, Arnaud Roques
 *
 * Project Info:  https://plantuml.com
 * 
 * If you like this project or if you find it useful, you can support us at:
 * 
 * https://plantuml.com/patreon (only 1$ per month!)
 * https://plantuml.com/paypal
 * 
 * This file is part of PlantUML.
 *
 * PlantUML is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * PlantUML distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public
 * License for more details.
 *
 * You should have received a copy of the GNU General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301,
 * USA.
 *
 *
 * Original Author:  Arnaud Roques
 *
 *
 */
package net.sourceforge.plantuml.activitydiagram3.ftile.vcompact;

import java.util.ArrayList;
import java.util.Collection;
import java.util.List;

import net.sourceforge.plantuml.activitydiagram3.Branch;
import net.sourceforge.plantuml.activitydiagram3.ForkStyle;
import net.sourceforge.plantuml.activitydiagram3.Instruction;
import net.sourceforge.plantuml.activitydiagram3.LinkRendering;
import net.sourceforge.plantuml.activitydiagram3.PositionedNote;
import net.sourceforge.plantuml.activitydiagram3.ftile.BoxStyle;
import net.sourceforge.plantuml.activitydiagram3.ftile.Ftile;
import net.sourceforge.plantuml.activitydiagram3.ftile.FtileAssemblySimple;
import net.sourceforge.plantuml.activitydiagram3.ftile.FtileFactory;
import net.sourceforge.plantuml.activitydiagram3.ftile.Swimlane;
import net.sourceforge.plantuml.activitydiagram3.ftile.vertical.FtileBox;
import net.sourceforge.plantuml.activitydiagram3.ftile.vertical.FtileBoxEmoji;
import net.sourceforge.plantuml.activitydiagram3.ftile.vertical.FtileCircleEndCross;
import net.sourceforge.plantuml.activitydiagram3.ftile.vertical.FtileCircleSpot;
import net.sourceforge.plantuml.activitydiagram3.ftile.vertical.FtileCircleStart;
import net.sourceforge.plantuml.activitydiagram3.ftile.vertical.FtileCircleStop;
import net.sourceforge.plantuml.activitydiagram3.ftile.vertical.FtileDecorateIn;
import net.sourceforge.plantuml.activitydiagram3.ftile.vertical.FtileDecorateOut;
import net.sourceforge.plantuml.decoration.symbol.USymbol;
import net.sourceforge.plantuml.klimt.color.Colors;
import net.sourceforge.plantuml.klimt.color.HColor;
import net.sourceforge.plantuml.klimt.creole.Display;
import net.sourceforge.plantuml.klimt.font.FontParam;
import net.sourceforge.plantuml.klimt.font.StringBounder;
import net.sourceforge.plantuml.klimt.font.UFont;
import net.sourceforge.plantuml.klimt.geom.VerticalAlignment;
import net.sourceforge.plantuml.stereo.Stereotype;
import net.sourceforge.plantuml.style.ISkinParam;
import net.sourceforge.plantuml.style.SName;
import net.sourceforge.plantuml.style.Style;
import net.sourceforge.plantuml.style.StyleBuilder;
import net.sourceforge.plantuml.style.StyleSignatureBasic;
import net.sourceforge.plantuml.url.Url;

public class VCompactFactory implements FtileFactory {

	private final ISkinParam skinParam;
	private final StringBounder stringBounder;

	@Override
	public StringBounder getStringBounder() {
<span class="fc" id="L83">		return stringBounder;</span>
	}

	public StyleBuilder getCurrentStyleBuilder() {
<span class="nc" id="L87">		return skinParam.getCurrentStyleBuilder();</span>
	}

<span class="fc" id="L90">	public VCompactFactory(ISkinParam skinParam, StringBounder stringBounder) {</span>
<span class="fc" id="L91">		this.skinParam = skinParam;</span>
<span class="fc" id="L92">		this.stringBounder = stringBounder;</span>
<span class="fc" id="L93">	}</span>

	private StyleSignatureBasic getSignatureCircleEnd() {
<span class="nc" id="L96">		return StyleSignatureBasic.of(SName.root, SName.element, SName.activityDiagram, SName.circle, SName.end);</span>
	}

	private StyleSignatureBasic getSignatureCircleStop() {
<span class="fc" id="L100">		return StyleSignatureBasic.of(SName.root, SName.element, SName.activityDiagram, SName.circle, SName.stop);</span>
	}

	private StyleSignatureBasic getSignatureCircleSpot() {
<span class="nc" id="L104">		return StyleSignatureBasic.of(SName.root, SName.element, SName.activityDiagram, SName.circle, SName.spot);</span>
	}

	private StyleSignatureBasic getSignatureCircleStart() {
<span class="fc" id="L108">		return StyleSignatureBasic.of(SName.root, SName.element, SName.activityDiagram, SName.circle, SName.start);</span>
	}

	@Override
	public Ftile start(Swimlane swimlane) {
<span class="fc" id="L113">		final Style style = getSignatureCircleStart().getMergedStyle(skinParam.getCurrentStyleBuilder());</span>
<span class="fc" id="L114">		return new FtileCircleStart(skinParam(), swimlane, style);</span>
	}

	@Override
	public Ftile stop(Swimlane swimlane) {
<span class="fc" id="L119">		final Style style = getSignatureCircleStop().getMergedStyle(skinParam.getCurrentStyleBuilder());</span>
<span class="fc" id="L120">		return new FtileCircleStop(skinParam(), swimlane, style);</span>
	}

	@Override
	public Ftile spot(Swimlane swimlane, String spot, HColor color) {
<span class="nc" id="L125">		final UFont font = skinParam.getFont(null, false, FontParam.ACTIVITY);</span>
<span class="nc" id="L126">		final Style style = getSignatureCircleSpot().getMergedStyle(skinParam.getCurrentStyleBuilder());</span>
<span class="nc" id="L127">		return new FtileCircleSpot(skinParam(), swimlane, spot, font, color, style);</span>
	}

	@Override
	public Ftile end(Swimlane swimlane) {
<span class="nc" id="L132">		final Style style = getSignatureCircleEnd().getMergedStyle(skinParam.getCurrentStyleBuilder());</span>
<span class="nc" id="L133">		return new FtileCircleEndCross(skinParam(), swimlane, style);</span>
	}

	@Override
	public Ftile activity(Display label, Swimlane swimlane, BoxStyle boxStyle, Colors colors, Stereotype stereotype,
			StyleBuilder styleBuilder) {
<span class="pc bpc" id="L139" title="3 of 4 branches missed.">		if (stereotype != null &amp;&amp; stereotype.isIcon())</span>
<span class="nc" id="L140">			return FtileBoxEmoji.create(colors.mute(skinParam), label, swimlane, stereotype, styleBuilder);</span>

<span class="fc" id="L142">		return FtileBox.create(colors.mute(skinParam), label, swimlane, boxStyle, stereotype, styleBuilder);</span>
	}

	@Override
	public Ftile addNote(Ftile ftile, Swimlane swimlane, Collection&lt;PositionedNote&gt; notes,
			VerticalAlignment verticalAlignment) {
<span class="nc" id="L148">		return ftile;</span>
	}

	@Override
	public Ftile addUrl(Ftile ftile, Url url) {
<span class="nc" id="L153">		return ftile;</span>
	}

	@Override
	public Ftile assembly(Ftile tile1, Ftile tile2) {
<span class="fc" id="L158">		return new FtileAssemblySimple(tile1, tile2);</span>
	}

	@Override
	public Ftile repeat(BoxStyle boxStyleIn, Stereotype stereotype, Swimlane swimlane, Swimlane swimlaneOut,
			Display startLabel, Ftile repeat, Display test, Display yes, Display out, Colors colors, Ftile backward,
			boolean noOut, LinkRendering incoming1, LinkRendering incoming2, StyleBuilder currentStyleBuilder,
			Colors colors2, Stereotype stereotype2) {
<span class="nc" id="L166">		return repeat;</span>
	}

	@Override
	public Ftile createWhile(LinkRendering afterEndwhile, Swimlane swimlane, Ftile whileBlock, Display test,
			Display yes, HColor color, Instruction specialOut, Ftile back, LinkRendering incoming1,
			LinkRendering incoming2, StyleBuilder styleBuilder) {
<span class="nc" id="L173">		return whileBlock;</span>
	}

	@Override
	public Ftile createIf(Swimlane swimlane, List&lt;Branch&gt; thens, Branch elseBranch, LinkRendering afterEndwhile,
			LinkRendering topInlinkRendering, Url url, Collection&lt;PositionedNote&gt; notes, Stereotype stereotype,
			StyleBuilder currentStyleBuilder) {
<span class="nc" id="L180">		final List&lt;Ftile&gt; ftiles = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L181" title="All 2 branches missed.">		for (Branch branch : thens)</span>
<span class="nc" id="L182">			ftiles.add(branch.getFtile());</span>

<span class="nc" id="L184">		ftiles.add(elseBranch.getFtile());</span>
<span class="nc" id="L185">		return new FtileForkInner(ftiles);</span>
	}

	@Override
	public Ftile createSwitch(Swimlane swimlane, List&lt;Branch&gt; branches, LinkRendering afterEndwhile,
			LinkRendering topInlinkRendering, Display labelTest) {
<span class="nc" id="L191">		final List&lt;Ftile&gt; ftiles = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L192" title="All 2 branches missed.">		for (Branch branch : branches)</span>
<span class="nc" id="L193">			ftiles.add(branch.getFtile());</span>

<span class="nc" id="L195">		return new FtileForkInner(ftiles);</span>
	}

	@Override
	public Ftile createParallel(List&lt;Ftile&gt; all, ForkStyle style, String label, Swimlane in, Swimlane out) {
<span class="nc" id="L200">		return new FtileForkInner(all);</span>
	}

	@Override
	public Ftile createGroup(Ftile list, Display name, HColor backColor, PositionedNote note, USymbol type,
			Style style) {
<span class="nc" id="L206">		return list;</span>
	}

	@Override
	public Ftile decorateIn(final Ftile ftile, final LinkRendering linkRendering) {
<span class="nc" id="L211">		return new FtileDecorateIn(ftile, linkRendering);</span>
	}

	@Override
	public Ftile decorateOut(final Ftile ftile, final LinkRendering linkRendering) {
		// if (ftile instanceof FtileWhile) {
		// if (linkRendering != null) {
		// ((FtileWhile) ftile).changeAfterEndwhileColor(linkRendering.getColor());
		// }
		// return ftile;
		// }
<span class="fc" id="L222">		return new FtileDecorateOut(ftile, linkRendering);</span>
	}

	@Override
	public ISkinParam skinParam() {
<span class="fc" id="L227">		return skinParam;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.14.202510111229</span></div></body></html>