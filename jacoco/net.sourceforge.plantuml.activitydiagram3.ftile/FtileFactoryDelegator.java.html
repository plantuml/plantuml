<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>FtileFactoryDelegator.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">plantuml</a> &gt; <a href="index.source.html" class="el_package">net.sourceforge.plantuml.activitydiagram3.ftile</a> &gt; <span class="el_source">FtileFactoryDelegator.java</span></div><h1>FtileFactoryDelegator.java</h1><pre class="source lang-java linenums">/* ========================================================================
 * PlantUML : a free UML diagram generator
 * ========================================================================
 *
 * (C) Copyright 2009-2024, Arnaud Roques
 *
 * Project Info:  https://plantuml.com
 * 
 * If you like this project or if you find it useful, you can support us at:
 * 
 * https://plantuml.com/patreon (only 1$ per month!)
 * https://plantuml.com/paypal
 * 
 * This file is part of PlantUML.
 *
 * PlantUML is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * PlantUML distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public
 * License for more details.
 *
 * You should have received a copy of the GNU General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301,
 * USA.
 *
 *
 * Original Author:  Arnaud Roques
 *
 *
 */
package net.sourceforge.plantuml.activitydiagram3.ftile;

import java.util.Collection;
import java.util.List;
import java.util.Objects;

import net.sourceforge.plantuml.activitydiagram3.Branch;
import net.sourceforge.plantuml.activitydiagram3.ForkStyle;
import net.sourceforge.plantuml.activitydiagram3.Instruction;
import net.sourceforge.plantuml.activitydiagram3.LinkRendering;
import net.sourceforge.plantuml.activitydiagram3.PositionedNote;
import net.sourceforge.plantuml.decoration.Rainbow;
import net.sourceforge.plantuml.decoration.symbol.USymbol;
import net.sourceforge.plantuml.klimt.color.Colors;
import net.sourceforge.plantuml.klimt.color.HColor;
import net.sourceforge.plantuml.klimt.creole.CreoleMode;
import net.sourceforge.plantuml.klimt.creole.Display;
import net.sourceforge.plantuml.klimt.font.FontConfiguration;
import net.sourceforge.plantuml.klimt.font.StringBounder;
import net.sourceforge.plantuml.klimt.geom.HorizontalAlignment;
import net.sourceforge.plantuml.klimt.geom.VerticalAlignment;
import net.sourceforge.plantuml.klimt.shape.TextBlock;
import net.sourceforge.plantuml.skin.rose.Rose;
import net.sourceforge.plantuml.stereo.Stereotype;
import net.sourceforge.plantuml.style.ISkinParam;
import net.sourceforge.plantuml.style.SName;
import net.sourceforge.plantuml.style.Style;
import net.sourceforge.plantuml.style.StyleBuilder;
import net.sourceforge.plantuml.style.StyleSignatureBasic;
import net.sourceforge.plantuml.url.Url;

public class FtileFactoryDelegator implements FtileFactory {

	private final FtileFactory factory;

<span class="fc" id="L71">	private final Rose rose = new Rose();</span>

	final public StyleSignatureBasic getDefaultStyleDefinitionActivity() {
<span class="nc" id="L74">		return StyleSignatureBasic.of(SName.root, SName.element, SName.activityDiagram, SName.activity);</span>
	}

	final public StyleSignatureBasic getDefaultStyleDefinitionDiamond() {
<span class="fc" id="L78">		return StyleSignatureBasic.of(SName.root, SName.element, SName.activityDiagram, SName.activity, SName.diamond);</span>
	}

	final public StyleSignatureBasic getDefaultStyleDefinitionArrow() {
<span class="fc" id="L82">		return StyleSignatureBasic.of(SName.root, SName.element, SName.activityDiagram, SName.arrow);</span>
	}

	protected final Rainbow getInLinkRenderingColor(Ftile tile) {
		Rainbow color;
<span class="fc" id="L87">		final LinkRendering linkRendering = tile.getInLinkRendering();</span>
<span class="pc bpc" id="L88" title="1 of 2 branches missed.">		if (linkRendering == null) {</span>
<span class="nc" id="L89">			final Style style = getDefaultStyleDefinitionArrow().getMergedStyle(skinParam().getCurrentStyleBuilder());</span>
<span class="nc" id="L90">			return Rainbow.build(style, skinParam().getIHtmlColorSet());</span>
		} else {
<span class="fc" id="L92">			color = linkRendering.getRainbow();</span>
		}
<span class="fc bfc" id="L94" title="All 2 branches covered.">		if (color.size() == 0) {</span>
<span class="fc" id="L95">			final Style style = getDefaultStyleDefinitionArrow().getMergedStyle(skinParam().getCurrentStyleBuilder());</span>
<span class="fc" id="L96">			return Rainbow.build(style, skinParam().getIHtmlColorSet());</span>
		}
<span class="fc" id="L98">		return color;</span>
	}

	protected final TextBlock getTextBlock(Display display) {
		// DUP3945
<span class="pc bpc" id="L103" title="1 of 2 branches missed.">		if (Display.isNull(display))</span>
<span class="fc" id="L104">			return null;</span>

<span class="nc" id="L106">		final Style style = getDefaultStyleDefinitionArrow().getMergedStyle(skinParam().getCurrentStyleBuilder());</span>
<span class="nc" id="L107">		final FontConfiguration fontConfiguration = style.getFontConfiguration(skinParam().getIHtmlColorSet());</span>

<span class="nc" id="L109">		return display.create7(fontConfiguration, HorizontalAlignment.LEFT, skinParam(), CreoleMode.SIMPLE_LINE);</span>
	}

	protected Display getInLinkRenderingDisplay(Ftile tile) {
<span class="fc" id="L113">		final LinkRendering linkRendering = tile.getInLinkRendering();</span>
<span class="pc bpc" id="L114" title="1 of 2 branches missed.">		if (linkRendering == null)</span>
<span class="nc" id="L115">			return Display.NULL;</span>

<span class="fc" id="L117">		return linkRendering.getDisplay();</span>
	}

<span class="fc" id="L120">	public FtileFactoryDelegator(FtileFactory factory) {</span>
<span class="fc" id="L121">		this.factory = factory;</span>
<span class="fc" id="L122">	}</span>

	@Override
	public Ftile start(Swimlane swimlane) {
<span class="fc" id="L126">		return factory.start(swimlane);</span>
	}

	@Override
	public Ftile end(Swimlane swimlane) {
<span class="nc" id="L131">		return factory.end(swimlane);</span>
	}

	@Override
	public Ftile stop(Swimlane swimlane) {
<span class="fc" id="L136">		return factory.stop(swimlane);</span>
	}

	@Override
	public Ftile spot(Swimlane swimlane, String spot, HColor color) {
<span class="nc" id="L141">		return factory.spot(swimlane, spot, color);</span>
	}

	@Override
	public Ftile activity(Display label, Swimlane swimlane, BoxStyle style, Colors colors, Stereotype stereotype, StyleBuilder styleBuilder) {
<span class="fc" id="L146">		return factory.activity(label, swimlane, style, colors, stereotype, styleBuilder);</span>
	}

	@Override
	public Ftile addNote(Ftile ftile, Swimlane swimlane, Collection&lt;PositionedNote&gt; notes,
			VerticalAlignment verticalAlignment) {
<span class="fc" id="L152">		return factory.addNote(ftile, swimlane, notes, verticalAlignment);</span>
	}

	@Override
	public Ftile addUrl(Ftile ftile, Url url) {
<span class="nc" id="L157">		return factory.addUrl(ftile, url);</span>
	}

	@Override
	public Ftile decorateIn(Ftile ftile, LinkRendering linkRendering) {
<span class="nc" id="L162">		return factory.decorateIn(ftile, Objects.requireNonNull(linkRendering));</span>
	}

	@Override
	public Ftile decorateOut(Ftile ftile, LinkRendering linkRendering) {
<span class="fc" id="L167">		return factory.decorateOut(ftile, Objects.requireNonNull(linkRendering));</span>
	}

	@Override
	public Ftile assembly(Ftile tile1, Ftile tile2) {
<span class="fc" id="L172">		return factory.assembly(tile1, tile2);</span>
	}

	@Override
	public Ftile repeat(BoxStyle boxStyleIn, Stereotype stereotype, Swimlane swimlane, Swimlane swimlaneOut, Display startLabel, Ftile repeat,
			Display test, Display yes, Display out, Colors colors, Ftile backward, boolean noOut,
			LinkRendering incoming1, LinkRendering incoming2, StyleBuilder currentStyleBuilder) {
<span class="fc" id="L179">		return factory.repeat(boxStyleIn, stereotype, swimlane, swimlaneOut, startLabel, repeat, test, yes, out, colors, backward,</span>
				noOut, incoming1, incoming2, currentStyleBuilder);
	}

	@Override
	public Ftile createWhile(LinkRendering outColor, Swimlane swimlane, Ftile whileBlock, Display test, Display yes,
			HColor color, Instruction specialOut, Ftile back, LinkRendering incoming1, LinkRendering incoming2,
			StyleBuilder styleBuilder) {
<span class="nc" id="L187">		return factory.createWhile(outColor, swimlane, whileBlock, test, yes, color, specialOut, back, incoming1,</span>
				incoming2, styleBuilder);
	}

	@Override
	public Ftile createIf(Swimlane swimlane, List&lt;Branch&gt; thens, Branch elseBranch, LinkRendering afterEndwhile,
			LinkRendering topInlinkRendering, Url url, Collection&lt;PositionedNote&gt; notes, Stereotype stereotype,
			StyleBuilder currentStyleBuilder) {
<span class="nc" id="L195">		return factory.createIf(swimlane, thens, elseBranch, afterEndwhile, topInlinkRendering, url, notes, stereotype,</span>
				currentStyleBuilder);
	}

	@Override
	public Ftile createSwitch(Swimlane swimlane, List&lt;Branch&gt; branches, LinkRendering afterEndwhile,
			LinkRendering topInlinkRendering, Display labelTest) {
<span class="nc" id="L202">		return factory.createSwitch(swimlane, branches, afterEndwhile, topInlinkRendering, labelTest);</span>
	}

	@Override
	public Ftile createParallel(List&lt;Ftile&gt; all, ForkStyle style, String label, Swimlane in, Swimlane out) {
<span class="nc" id="L207">		return factory.createParallel(all, style, label, in, out);</span>
	}

	@Override
	public Ftile createGroup(Ftile list, Display name, HColor backColor, PositionedNote note, USymbol type,
			Style style) {
<span class="nc" id="L213">		return factory.createGroup(list, name, backColor, note, type, style);</span>
	}

	@Override
	public StringBounder getStringBounder() {
<span class="fc" id="L218">		return factory.getStringBounder();</span>
	}

	protected final Rose getRose() {
<span class="nc" id="L222">		return rose;</span>
	}

	@Override
	public final ISkinParam skinParam() {
<span class="fc" id="L227">		return factory.skinParam();</span>
	}

	protected FtileFactory getFactory() {
<span class="nc" id="L231">		return factory;</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>